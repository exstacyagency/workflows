# Billing Enforcement Matrix

Generated by `scripts/generate_billing_matrix.mjs`.

Legend:
- ✅ present
- ❌ missing

## Routes

| Route | JobType | MinPlan | PlanGate | ReserveQuota | RollbackQuota | PersistReservation | Idempotency | RateLimit | Auth | OwnerCheck | BillingComplete | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| /api/jobs/[id] |  |  | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ | non-spend route (excluded from billing completeness); no idempotency; no rate limit; no explicit auth check (may rely on middleware) |
| /api/jobs/ad-performance | AD_PERFORMANCE | GROWTH | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/ad-transcripts | AD_TRANSCRIPTS | GROWTH | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/character-generation | CHARACTER_GENERATION | GROWTH | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/customer-analysis | CUSTOMER_ANALYSIS | GROWTH | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/customer-research | CUSTOMER_RESEARCH | GROWTH | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/pattern-analysis | CUSTOMER_RESEARCH | GROWTH | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/script-generation | SCRIPT_GENERATION | GROWTH | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/storyboard-generation |  | GROWTH | ✅ | ❌ | ❌ | ❌ | ✅ | ✅ | ❌ | ✅ | ❌ | non-spend route (excluded from billing completeness); plan-gated but no reserveQuota; no explicit auth check (may rely on middleware) |
| /api/jobs/video-generation | VIDEO_GENERATION | GROWTH | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/video-generation/status | VIDEO_PROMPT_GENERATION |  | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ | ❌ | ✅ | ❌ | non-spend route (excluded from billing completeness); no explicit auth check (may rely on middleware) |
| /api/jobs/video-images/start | VIDEO_IMAGE_GENERATION | GROWTH | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/video-images/status | VIDEO_IMAGE_GENERATION |  | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ | ❌ | ❌ | ❌ | non-spend route (excluded from billing completeness); no explicit auth check (may rely on middleware) |
| /api/jobs/video-prompts | VIDEO_PROMPT_GENERATION | GROWTH | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/video-reviewer | VIDEO_REVIEW | SCALE | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
| /api/jobs/video-upscaler | VIDEO_UPSCALER | SCALE | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ | no explicit auth check (may rely on middleware) |
